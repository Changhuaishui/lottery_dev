# 项目架构（难度：⭐️⭐️⭐️）

## 1、前置知识

**前后端分离：**

使用Nginx



**管理后台解决方案：（基本功能已开发完成）**

基于开源的若依低代码平台完成基本crud

官网：http://ruoyi.vip

基于MIT开源协议，可商用、修改、发行，保留LICENSE



**接口服务：（将来需要完成的任务！）**

使用Springboot，版本选2.7.17，参考官网： https://spring.io/projects/spring-boot#support



**项目代码结构：**

backend是需要启动的管理后台

api，msg是需要启动的两个Springboot项目：

<img src="assets/image-20231117%E4%B8%8A%E5%8D%88112526885.png" alt="image-20231117上午112526885" style="zoom:50%;" />



commons里有一些对应的工具类，无需启动：

<img src="assets/image-20231123%E4%B8%8A%E5%8D%88110737959.png" alt="image-20231123上午110737959" style="zoom:50%;" />



更多内容可以参考《设计文档》第 2.1、2.3 章节



## 2、任务清单

Git获取代码，创建自己分支

项目配置修改与启动

Nginx安装及前后端分离

熟悉项目里的表和公共代码



## 3、完成标准

### 3.1 Git从仓库获取代码并创建自己分支

最终切换到自己分支进行开发【提交结果截图】

```shell
#仓库地址： https://gitee.com/380014953/lottery.git
#注册gitee账号，并从上述仓库克隆dev分支
#基于dev创建自己的独立分支，将来在独立分支上开发

[root@iZbp11ablifhhtuuo4x4byZ test]# git clone https://gitee.com/380014953/lottery.git
正克隆到 'lottery'...
remote: Enumerating objects: 1086, done.
remote: Counting objects: 100% (1086/1086), done.
remote: Compressing objects: 100% (676/676), done.
remote: Total 1086 (delta 381), reused 976 (delta 347), pack-reused 0
接收对象中: 100% (1086/1086), 14.30 MiB | 3.10 MiB/s, done.
处理 delta 中: 100% (381/381), done.

[root@iZbp11ablifhhtuuo4x4byZ test]# cd lottery/

[root@iZbp11ablifhhtuuo4x4byZ lottery]# git branch
* dev

[root@iZbp11ablifhhtuuo4x4byZ lottery]# git branch -a
* dev
  remotes/origin/HEAD -> origin/dev
  remotes/origin/dev
  remotes/origin/master

[root@iZbp11ablifhhtuuo4x4byZ lottery]# git checkout -b zhangsan
切换到一个新分支 'zhangsan'

[root@iZbp11ablifhhtuuo4x4byZ lottery]# git branch
  dev
* zhangsan
```





### 3.2 启动管理后台

找到backend包下的：RuoYiApplication类，启动里面的main方法

然后访问： http://localhost:8888    

后台登录成功界面：【提交结果截图】

![image-20240103上午100129577](pic//image-20240103%E4%B8%8A%E5%8D%88100129577.png)



### 3.4 启动frontend

启动api及msg下的main方法，确保可以正常启动

以下以api为例：

![image-20231117上午113553179](assets/image-20231117%E4%B8%8A%E5%8D%88113553179.png)

访问swagger： http://localhost:9001/doc.html   【提交结果截图】

![image-20231117上午113719300](assets/image-20231117%E4%B8%8A%E5%8D%88113719300.png)



### 3.5 数据库读写测试

在api里尝试随便写一个测试Controller，在swagger中进行自测，通过mybatis读取数据库的数据展示

【提交结果截图】

![image-20231120下午71834791](assets/image-20231120%E4%B8%8B%E5%8D%8871834791.png)



### 3.6 集成前后台环境

部署Nginx或Openresty，确保前台正常运行

```
#下载Openresty，地址： http://openresty.org/en/download.html
#解压后，将 lottery 项目根文件夹中的nginx.conf覆盖openresty里的 conf/nginx.conf
#启动openresty
```

注意覆盖后，修改以下为自己的配置：

![image-20231226上午113956121](pic//image-20231226%E4%B8%8A%E5%8D%88113956121.png)



注意Nginx配置文件的格式，详细配置语法可以自行查询相关资料：

- 以上为Linux环境，Mac环境下相同，Windows下应该长这样：

```
D:\\src\\lottery\\h5\\;
```

- 最后面的分隔符不要丢，尤其是对于alias，否则极有可能文件访问不到



整体访问，可以打开页面，但是目前没数据是正常的（接口待开发中……）：  【提交结果截图】

```
http://localhost
```



### 3.7 熟悉项目业务

需要关注 card_xxx表，view_xxx的视图，其他表属于管理后台的系统表，可以忽略

根据产品需求原型对照数据库表，理解数据库各个表和视图的设计

熟知各个字段的意义（字段comment有备注）

熟悉commons里其他的公共工具

准备好功能开发，开始起飞~



## 4、参考资料

- springboot: https://www.bilibili.com/video/BV1Lq4y1J77x/?spm_id_from=333.337.search-card.all.click&vd_source=ddc87dbee3553336b61e8b37579bfd2d
- mybatis的使用：https://www.bilibili.com/video/BV1MT4y1k7wZ?p=2&vd_source=ddc87dbee3553336b61e8b37579bfd2d

- 官网： https://spring.io/projects/spring-boot#support



![image-20231103上午113634320](assets/image-20231103%E4%B8%8A%E5%8D%88113634320.png)



